@use "sass:math";
@import "main-story.scss";
@import "main-table.scss";
@import "main-user-comments.scss";
@import "main-scrolly-telling.scss";
@import "quote-number.scss";
html {
    scroll-behavior: smooth;
}

body {
    overflow: hidden;
}

.container {
    height: 100vh;
    width: 100vw;
    display: grid;
    grid-template-columns: 1fr;
    grid-template-rows: 1fr;
    padding: 0;
}

.header-container {
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
    position: fixed;
    top: 0;
    width: 100%;
    z-index: 1;
    display: block!important;
}
.header-inner {
    background-color: transparent!important;
}
.current-edition span {
    white-space: nowrap;
}
.error {
    color: #CC0000;
}
.main-content {
    margin: 0 auto;
    position: relative;
    height: 100%;
    width: 100%;
    overflow-y: hidden;
    // padding-bottom: $navHeight + $defaultPadding;
}

.chat-content {
    padding: 0 0 $navHeight 0;
    // padding: $headerHeight + $defaultPadding 0 $navHeight 0;
    height: 100%;
    overflow: scroll;
}
.chat-talk {
    margin-bottom: 1em;
    &:first-child {
        margin-top: $navHeight + $defaultPadding;
    }
    &:last-child {
        padding-bottom: $navHeight + $defaultPadding;
    }
}
.chat-talk-inner {
    position: relative;
    max-width: 768px;
    padding: 5px 5px 5px $navHeight+$defaultPadding;
    font-size: 1.2em;    
    min-height: $logoHeight + 10px;
    margin: 0 auto;
    &:before {
        position: absolute;
        left: 5px;
        top: 5px;
        width: $logoHeight;
        height: $logoHeight;
        content: '';
        background-repeat: no-repeat;
        background-size: cover;
    }
    p {
        padding-bottom: 1em;
    }
}

.chat-talk-user {
    background-color: $bannerBG;
    .chat-talk-inner {
        &:before {
            background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iNDgiIHdpZHRoPSI0OCI+PHBhdGggZmlsbD0id2hpdGUiIGQ9Ik0yNCAyMy45NXEtMy4zIDAtNS40LTIuMS0yLjEtMi4xLTIuMS01LjQgMC0zLjMgMi4xLTUuNCAyLjEtMi4xIDUuNC0yLjEgMy4zIDAgNS40IDIuMSAyLjEgMi4xIDIuMSA1LjQgMCAzLjMtMi4xIDUuNC0yLjEgMi4xLTUuNCAyLjFaTTggNDB2LTQuN3EwLTEuOS45NS0zLjI1VDExLjQgMzBxMy4zNS0xLjUgNi40MjUtMi4yNVEyMC45IDI3IDI0IDI3cTMuMSAwIDYuMTUuNzc1IDMuMDUuNzc1IDYuNCAyLjIyNSAxLjU1LjcgMi41IDIuMDUuOTUgMS4zNS45NSAzLjI1VjQwWm0zLTNoMjZ2LTEuN3EwLS44LS40NzUtMS41MjUtLjQ3NS0uNzI1LTEuMTc1LTEuMDc1LTMuMi0xLjU1LTUuODUtMi4xMjVRMjYuODUgMzAgMjQgMzB0LTUuNTUuNTc1cS0yLjcuNTc1LTUuODUgMi4xMjUtLjcuMzUtMS4xNSAxLjA3NVExMSAzNC41IDExIDM1LjNabTEzLTE2LjA1cTEuOTUgMCAzLjIyNS0xLjI3NVEyOC41IDE4LjQgMjguNSAxNi40NXEwLTEuOTUtMS4yNzUtMy4yMjVRMjUuOTUgMTEuOTUgMjQgMTEuOTVxLTEuOTUgMC0zLjIyNSAxLjI3NVExOS41IDE0LjUgMTkuNSAxNi40NXEwIDEuOTUgMS4yNzUgMy4yMjVRMjIuMDUgMjAuOTUgMjQgMjAuOTVabTAtNC41Wk0yNCAzN1oiLz48L3N2Zz4=);
            background-color: $blueBGFT;
        }
    }
}
.chat-talk-agent {
    .chat-talk-inner {
        &:before {
            background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iNDgiIHdpZHRoPSI0OCI+PHBhdGggZmlsbD0id2hpdGUiIGQ9Ik0yMiA0MnYtM2gxN1YyMy44cTAtMi45LTEuMjUtNS41NzVRMzYuNSAxNS41NSAzNC40IDEzLjV0LTQuOC0zLjI3NVEyNi45IDkgMjQgOXEtMi45IDAtNS42IDEuMjI1LTIuNyAxLjIyNS00LjggMy4yNzUtMi4xIDIuMDUtMy4zNSA0LjcyNVQ5IDIzLjhWMzZIOHEtMS42NSAwLTIuODI1LTEuMTc1UTQgMzMuNjUgNCAzMnYtNHEwLTEuMTUuNTUtMi4wMjVUNiAyNC41NWwuMTUtMi42NXEuNDUtMy42NSAyLjA3NS02LjYgMS42MjUtMi45NSA0LjA1LTV0NS40NS0zLjE3NVEyMC43NSA2IDI0IDZxMy4zIDAgNi4zMjUgMS4xMjUgMy4wMjUgMS4xMjUgNS40MjUgMy4ydDQuMDI1IDVRNDEuNCAxOC4yNSA0MS44NSAyMS44NWwuMTUgMi42cS45LjQ1IDEuNDUgMS4zMjUuNTUuODc1LjU1IDEuOTI1djQuNnEwIDEuMS0uNTUgMS45NS0uNTUuODUtMS40NSAxLjNWMzlxMCAxLjI1LS44NzUgMi4xMjVUMzkgNDJabS00LTE0LjVxLS42IDAtMS4wNS0uNDUtLjQ1LS40NS0uNDUtMS4xIDAtLjYuNDUtMS4wMjUuNDUtLjQyNSAxLjEtLjQyNS42IDAgMS4wMjUuNDI1LjQyNS40MjUuNDI1IDEuMDc1IDAgLjYtLjQyNSAxLjA1LS40MjUuNDUtMS4wNzUuNDVabTEyIDBxLS42IDAtMS4wNS0uNDUtLjQ1LS40NS0uNDUtMS4xIDAtLjYuNDUtMS4wMjUuNDUtLjQyNSAxLjEtLjQyNS42IDAgMS4wMjUuNDI1LjQyNS40MjUuNDI1IDEuMDc1IDAgLjYtLjQyNSAxLjA1LS40MjUuNDUtMS4wNzUuNDVabS0xNy45NS0yLjZxLS4yLTIuOTUuODI1LTUuMzUgMS4wMjUtMi40IDIuNzUtNC4wNzVRMTcuMzUgMTMuOCAxOS42IDEyLjlxMi4yNS0uOSA0LjUtLjkgNC41NSAwIDcuNjUgMi44NzUgMy4xIDIuODc1IDMuOCA3LjE3NS00LjctLjA1LTguMjc1LTIuNTI1VDIxLjc1IDEzLjFxLS44IDQuMDUtMy4zNzUgNy4xNzVUMTIuMDUgMjQuOVoiLz48L3N2Zz4=);
            background-color: $teal;
        }
    }
}
.chat-items-expand {
    width: 200px;
    height: $navHeight;
    margin: auto;
    position: relative;
    cursor: pointer;
    &:before {
        background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iNDgiIHdpZHRoPSI0OCI+PHBhdGggZD0ibTI0IDMwLjc1LTEyLTEyIDIuMTUtMi4xNUwyNCAyNi41bDkuODUtOS44NUwzNiAxOC44WiIvPjwvc3ZnPg==);
        content: '';
        position: absolute;
        left: 0;
        right: 0;
        top: 0;
        bottom: 0;
        margin: auto;
        background-repeat: no-repeat;
        background-position: center;
        background-size: contain;
    }
    &.pending:before {
        background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="48" width="48"><path d="M8.35 40v-3h6.5l-.75-.6q-3.2-2.55-4.65-5.55-1.45-3-1.45-6.7 0-5.3 3.125-9.525Q14.25 10.4 19.35 8.8v3.1q-3.75 1.45-6.05 4.825T11 24.15q0 3.15 1.175 5.475 1.175 2.325 3.175 4.025l1.5 1.05v-6.2h3V40Zm20.35-.75V36.1q3.8-1.45 6.05-4.825T37 23.85q0-2.4-1.175-4.875T32.75 14.6l-1.45-1.3v6.2h-3V8h11.5v3h-6.55l.75.7q3 2.8 4.5 6t1.5 6.15q0 5.3-3.1 9.55-3.1 4.25-8.2 5.85Z"/></svg>');
        animation: spinner 1s linear infinite;
    }
}

.chat-talk-user + .chat-talk-user .chat-talk-inner:before, .chat-talk-agent + .chat-talk-agent .chat-talk-inner:before {
    display: none;
}
.chat-input-container {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: $navHeight + 1.25 * $defaultPadding;
    background-color: $defaultPink;
}
.chat-input {
    display: flex;
    position: absolute;
    bottom: math.div($defaultPadding, 2);
    left: math.div($defaultPadding, 2);
    right: math.div($defaultPadding, 2);
    height: auto;
    max-width: 768px;
    margin: auto;
    border: 1px solid $whiteBorderFT;
    border-radius: math.div($defaultPadding, 4);
    padding: math.div($defaultPadding, 3) $navHeight math.div($defaultPadding, 3) math.div($defaultPadding, 3);
    background-color: white;
    textarea {
        background-color: white;
        border-width: 0;
        width: 100%;
        font-size: 18px;
        line-height: 24px;
        resize: none; 
        overflow-y: hidden;
        height: auto; 
        max-height: 200px;
        &:focus {
            outline-color: transparent;
        }
    }
}
.chat-submit {
    position: absolute;
    right: 0;
    top: 0;
    width: $navHeight;
    height: $navHeight;
    background-position: 50% 50%;
    background-size: 24px 24px;
    background-repeat: no-repeat;
    background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iNDgiIHdpZHRoPSI0OCI+PHBhdGggZD0iTTYgNDBWOGwzOCAxNlptMy00LjY1TDM2LjIgMjQgOSAxMi41djguNEwyMS4xIDI0IDkgMjdabTAgMFYxMi41IDI3WiIvPjwvc3ZnPg==);
    .pending & {
        background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="48" viewBox="0 96 960 960" width="48"><path d="M207.858 624Q188 624 174 609.858q-14-14.141-14-34Q160 556 174.142 542q14.141-14 34-14Q228 528 242 542.142q14 14.141 14 34Q256 596 241.858 610q-14.141 14-34 14Zm272 0Q460 624 446 609.858q-14-14.141-14-34Q432 556 446.142 542q14.141-14 34-14Q500 528 514 542.142q14 14.141 14 34Q528 596 513.858 610q-14.141 14-34 14Zm272 0Q732 624 718 609.858q-14-14.141-14-34Q704 556 718.142 542q14.141-14 34-14Q772 528 786 542.142q14 14.141 14 34Q800 596 785.858 610q-14.141 14-34 14Z"/></svg>');
    }
}


.chat-item-container {
    margin-bottom: 1em;
}

.chat-item-title {
    font-weight: bold;
    font-size: 1.2em;
    a {
        cursor: pointer;
    }
}

.chat-item-actions {
    a {
        cursor: pointer;
        color: white;
        background-color: #0f5499;
        padding: math.div($defaultPadding, 3) math.div($defaultPadding, 1);
        border-radius: math.div($defaultPadding, 1);
        display: inline-block;
        margin: math.div($defaultPadding, 2) math.div($defaultPadding, 2) 0 0;
        font-size:0.8em;
        &.hide {
            display: none;
        }
    }
    &.right {
        text-align: right;
        a {
            background-color: transparent;
            color: $darkGreen;
            padding-right: 0;
            padding-left: 0;
        }
    }
}

.chat-item-summary {
    font-weight: bold;
    font-size: 1.2em;
    margin-top: math.div($defaultPadding, 2);
}


[data-purpose] {
    // display: none;
    background-color: $bannerBG;
    padding: math.div($defaultPadding, 3);
    margin-top: math.div($defaultPadding, 2);
    font-size: 0.7em;
}

.logged-in-container, .sign-in-container {
    display: none;
}

.quiz-question {
    font-weight: bold;
    font-size: 1.2em;
    margin-bottom: math.div($defaultPadding, 2);
}

.quiz-options {
    div {
        background-color: rgb(230, 217, 206);
        border-color: rgb(230, 217, 206);
        border-width: 2px;
        border-style: solid;
        margin-bottom: math.div($defaultPadding, 2);
        // font-weight: bold;
        font-size: 1.2em;
        padding: math.div($defaultPadding, 2);
        cursor: pointer;
    }
}

.quiz-explanation {
    display: none;
    .is-done & {
        display: block;
    }
}

.quiz-container {
    border-top: 1px solid $borderColor;
    padding-top: 1em;
    margin-bottom: 1em;
    &:first-child {
        border-color: transparent;
        padding-top: 0;
    }
    .is-selected {
        border-color: rgb(33, 114, 171);
    }
    &.is-done {
        .is-correct {
            border-color: rgb(120, 189, 107);
        }
    }
    &.is-wrong {
        .is-selected {
            border-color: #CC0000;
        }
    }
}
.quiz-next {
    margin: auto;
    font-size: 1.2em;
    padding: math.div($defaultPadding, 4) math.div($defaultPadding, 2);
    width: auto;
    height: auto;
}
body {
    .sign-in-container {
        display: block;
    }
    &.logged-in {
        .sign-in-container {
            display: none;
        }
        .logged-in-container {
            display: block;
        }
    }
}

.full-grid-story {
    ft-related, promo-box, .story-header-container, .chat-item-actions, .article-prompt, .audio-placeholder, #story-body-container > * {
        max-width: 768px;
        margin-left: auto;
        margin-right: auto;
        display: block;
    }
    #story-body-container {
        .n-content-pullquote, .n-content-big-number, [data-layout-width="inset-left"] {
            max-width: 360px;
            margin-left: calc((100% - 768px) / 2);
            margin-right: 30px;
        }
    }
    .article-prompt {
        margin-top: 2em;
        font-weight: bold;
    }
}


@media only screen and (max-width: 980px) {
    .full-grid-story {
        #story-body-container {
            .n-content-pullquote, .n-content-big-number {
                margin: auto;
                padding: 0;
                float: none;
                max-width: 768px;
            }
        }
    }
}

.full-grid-story {
    .chat-talk-inner {
        max-width: 100%;
        padding: 0;
    }
    #story-body-container {
        .scrollable-block {
            max-width: 100%;
            margin: 0 auto 1em auto;
        }
        [data-layout-width="full-grid"] {
            max-width: 1200px;
            margin: 0 auto 1em auto;
        }
    }
}
.story-image {
    figure {
        img {
            max-width: 100%;
            width: 100%;
        }
    }
}

@keyframes spinner {
    0% {
      transform: rotate(0deg);
    }
    100% {
      transform: rotate(360deg);
    }
}