@use "sass:math";
@import "main-story.scss";
@import "main-table.scss";
@import "main-user-comments.scss";
@import "main-scrolly-telling.scss";
@import "quote-number.scss";
$sideBarWidth: 260px;
html {
    scroll-behavior: smooth;
}

body {
    &.font-smallest {
        font-size: 12px;
    }
    &.font-smaller {
        font-size: 14px;
    }
    &.font-larger {
        font-size: 20px;
    }
    &.font-largest {
        font-size: 24px;
    }
}
[data-action] {
    cursor: pointer;
}
.container {
    padding: 0;
    // display: flex;
    // height: 100vh;
    // background-color: red;
}
.sidebar {
    width: $sideBarWidth; /* Fixed width for sidebar */
    /* Additional styling */
    height: 100vh;
    position: fixed;
    left: 0;
    top: 0;
    bottom: 0;

}
.sidebar-close-button {
    display: none;
}
.sidebar-inner {
    width: $sideBarWidth; /* Fixed width for sidebar */
    background-color: $darkGrey;
    height: 100%;
    display: flex;
    flex-direction: column;
}
.main-chat-role {
    height: $navHeight;
    position: sticky;
    top: 0;
}

.current-chat-roles {
    flex-grow: 1;
    overflow-y: scroll;
}

.side-bottom {
    height: $navHeight;
    position: sticky;
    bottom: calc(env(safe-area-inset-bottom) / 3);
}

.header-container {
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
    position: fixed;
    top: 0;
    width: 100%;
    z-index: 1;
    display: none;
    // display: block!important;
    .is-in-native-app &{
        display: none!important;
    }
}
.main-content {
    margin: 0 auto 0 $sideBarWidth;
    position: relative;
    .full-grid & {
        margin: 0 auto;
    }
    // flex-grow: 1;
    // height: 100vh;
    // overflow-y: scroll;
}
.chat-content {
    padding: 0 0 $navHeight 0;
}
.settings-container {
    margin: auto auto $defaultPadding * 0.5 auto;
    // max-width: 450px;
    background-color: $bannerBG;
    padding: $defaultPadding * 0.5;
}
.header-inner {
    background-color: transparent!important;
}
.header-side {
    width: $headerHeight;
    background-position: 50%;
    background-repeat: no-repeat;
    background-size: 24px;
    cursor: pointer;
    @media only screen and (max-width: 490px) {
        background-size: 16px;
        width: $navHeight;
        height: $navHeight;
    }
}
.header-left {
    left: 0;
    
    @media only screen and (max-width: 490px) {
        display: block;
    }
}
.header-side-toggle {
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><path d="M1.5 20.14v-4.93c0-1.35.478-2.503 1.433-3.458S5.04 10.32 6.39 10.32h88.22c1.324 0 2.47.477 3.438 1.432S99.5 13.86 99.5 15.21v4.93c0 1.323-.484 2.47-1.452 3.437s-2.114 1.45-3.438 1.45H6.39c-1.35 0-2.502-.482-3.457-1.45C1.978 22.61 1.5 21.463 1.5 20.14zm0 31.824v-4.89c0-1.376.478-2.547 1.433-3.502.955-.95 2.108-1.426 3.458-1.426h88.22c1.324 0 2.47.478 3.438 1.426.968.955 1.452 2.126 1.452 3.502v4.89c0 1.324-.484 2.47-1.452 3.438-.968.97-2.114 1.452-3.438 1.452H6.39c-1.35 0-2.502-.483-3.457-1.452-.955-.967-1.433-2.114-1.433-3.438zm0 26.936c0-1.35.478-2.51 1.433-3.465S5.04 74.01 6.39 74.01h88.22c1.324 0 2.47.47 3.438 1.425S99.5 77.55 99.5 78.9v4.89c0 1.376-.484 2.534-1.452 3.477-.968.943-2.114 1.415-3.438 1.415H6.39c-1.35 0-2.502-.472-3.457-1.415-.955-.943-1.433-2.1-1.433-3.476V78.9z"/></svg>');
}

.current-edition {
    a {
        background-color: transparent;
    }
    span {
        white-space: nowrap;
    }
}
.back-arrow {
    // top: 0;
    // left: 0;
    // position: fixed;
    // width: $navHeight;
    // height: $navHeight;
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="M640-80 240-480l400-400 71 71-329 329 329 329-71 71Z"/></svg>');
    // background-repeat: no-repeat;
    // background-position: 50% 50%;
    background-size: 24px;
    // z-index: 9999999999;
}
a[data-action] {
    cursor: pointer;
}
.error {
    color: #CC0000;
}
.chat-talk {
    margin-bottom: 1em;
    &:first-child {
        margin-top: math.div($defaultPadding, 2);
        // margin-top: $navHeight + $defaultPadding;
        .is-in-native-app & {
            margin-top: math.div($defaultPadding, 2);
        }
        @media only screen and (max-width: 490px) {
            margin-top: $navHeight + 5px;
        }
    }
    &:last-child {
        padding-bottom: $navHeight + $defaultPadding * 2;
    }
}
.chat-talk-inner {
    position: relative;
    line-height: 1.618em;
    max-width: $chatWidth;
    padding: 5px 0 5px $navHeight;
    font-size: 1.2em;    
    min-height: $logoHeight + 10px;
    margin: 0 auto;
    &:before {
        position: absolute;
        left: 0;
        top: 5px;
        width: $logoHeight;
        height: $logoHeight;
        content: '';
        background-repeat: no-repeat;
        background-size: cover;
    }
    p {
        padding-bottom: 1em;
    }
}

.chat-talk-response-status {
    color: $lightGrey;
    font-size: 0.9em;
    line-height: 2.4em;
}

.full-grid-story, .chat-full-grid {
    .chat-talk-inner {
        &:before {
            display: none;
        }
    }  
}
.chat-talk-user {
    background-color: $bannerBG;
    .chat-talk-inner {
        &:before {
            background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iNDgiIHdpZHRoPSI0OCI+PHBhdGggZmlsbD0id2hpdGUiIGQ9Ik0yNCAyMy45NXEtMy4zIDAtNS40LTIuMS0yLjEtMi4xLTIuMS01LjQgMC0zLjMgMi4xLTUuNCAyLjEtMi4xIDUuNC0yLjEgMy4zIDAgNS40IDIuMSAyLjEgMi4xIDIuMSA1LjQgMCAzLjMtMi4xIDUuNC0yLjEgMi4xLTUuNCAyLjFaTTggNDB2LTQuN3EwLTEuOS45NS0zLjI1VDExLjQgMzBxMy4zNS0xLjUgNi40MjUtMi4yNVEyMC45IDI3IDI0IDI3cTMuMSAwIDYuMTUuNzc1IDMuMDUuNzc1IDYuNCAyLjIyNSAxLjU1LjcgMi41IDIuMDUuOTUgMS4zNS45NSAzLjI1VjQwWm0zLTNoMjZ2LTEuN3EwLS44LS40NzUtMS41MjUtLjQ3NS0uNzI1LTEuMTc1LTEuMDc1LTMuMi0xLjU1LTUuODUtMi4xMjVRMjYuODUgMzAgMjQgMzB0LTUuNTUuNTc1cS0yLjcuNTc1LTUuODUgMi4xMjUtLjcuMzUtMS4xNSAxLjA3NVExMSAzNC41IDExIDM1LjNabTEzLTE2LjA1cTEuOTUgMCAzLjIyNS0xLjI3NVEyOC41IDE4LjQgMjguNSAxNi40NXEwLTEuOTUtMS4yNzUtMy4yMjVRMjUuOTUgMTEuOTUgMjQgMTEuOTVxLTEuOTUgMC0zLjIyNSAxLjI3NVExOS41IDE0LjUgMTkuNSAxNi40NXEwIDEuOTUgMS4yNzUgMy4yMjVRMjIuMDUgMjAuOTUgMjQgMjAuOTVabTAtNC41Wk0yNCAzN1oiLz48L3N2Zz4=);
            background-color: $blueBGFT;
        }
    }
}
.chat-talk-agent {
    .chat-talk-inner {
        &:before {
            background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iNDgiIHdpZHRoPSI0OCI+PHBhdGggZmlsbD0id2hpdGUiIGQ9Ik0yMiA0MnYtM2gxN1YyMy44cTAtMi45LTEuMjUtNS41NzVRMzYuNSAxNS41NSAzNC40IDEzLjV0LTQuOC0zLjI3NVEyNi45IDkgMjQgOXEtMi45IDAtNS42IDEuMjI1LTIuNyAxLjIyNS00LjggMy4yNzUtMi4xIDIuMDUtMy4zNSA0LjcyNVQ5IDIzLjhWMzZIOHEtMS42NSAwLTIuODI1LTEuMTc1UTQgMzMuNjUgNCAzMnYtNHEwLTEuMTUuNTUtMi4wMjVUNiAyNC41NWwuMTUtMi42NXEuNDUtMy42NSAyLjA3NS02LjYgMS42MjUtMi45NSA0LjA1LTV0NS40NS0zLjE3NVEyMC43NSA2IDI0IDZxMy4zIDAgNi4zMjUgMS4xMjUgMy4wMjUgMS4xMjUgNS40MjUgMy4ydDQuMDI1IDVRNDEuNCAxOC4yNSA0MS44NSAyMS44NWwuMTUgMi42cS45LjQ1IDEuNDUgMS4zMjUuNTUuODc1LjU1IDEuOTI1djQuNnEwIDEuMS0uNTUgMS45NS0uNTUuODUtMS40NSAxLjNWMzlxMCAxLjI1LS44NzUgMi4xMjVUMzkgNDJabS00LTE0LjVxLS42IDAtMS4wNS0uNDUtLjQ1LS40NS0uNDUtMS4xIDAtLjYuNDUtMS4wMjUuNDUtLjQyNSAxLjEtLjQyNS42IDAgMS4wMjUuNDI1LjQyNS40MjUuNDI1IDEuMDc1IDAgLjYtLjQyNSAxLjA1LS40MjUuNDUtMS4wNzUuNDVabTEyIDBxLS42IDAtMS4wNS0uNDUtLjQ1LS40NS0uNDUtMS4xIDAtLjYuNDUtMS4wMjUuNDUtLjQyNSAxLjEtLjQyNS42IDAgMS4wMjUuNDI1LjQyNS40MjUuNDI1IDEuMDc1IDAgLjYtLjQyNSAxLjA1LS40MjUuNDUtMS4wNzUuNDVabS0xNy45NS0yLjZxLS4yLTIuOTUuODI1LTUuMzUgMS4wMjUtMi40IDIuNzUtNC4wNzVRMTcuMzUgMTMuOCAxOS42IDEyLjlxMi4yNS0uOSA0LjUtLjkgNC41NSAwIDcuNjUgMi44NzUgMy4xIDIuODc1IDMuOCA3LjE3NS00LjctLjA1LTguMjc1LTIuNTI1VDIxLjc1IDEzLjFxLS44IDQuMDUtMy4zNzUgNy4xNzVUMTIuMDUgMjQuOVoiLz48L3N2Zz4=);
            background-color: $teal;
        }
    }
}
.chat-items-expand {
    width: 200px;
    height: $navHeight;
    margin: auto;
    position: relative;
    cursor: pointer;
    &:before {
        background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iNDgiIHdpZHRoPSI0OCI+PHBhdGggZD0ibTI0IDMwLjc1LTEyLTEyIDIuMTUtMi4xNUwyNCAyNi41bDkuODUtOS44NUwzNiAxOC44WiIvPjwvc3ZnPg==);
        content: '';
        position: absolute;
        left: 0;
        right: 0;
        top: 0;
        bottom: 0;
        margin: auto;
        background-repeat: no-repeat;
        background-position: center;
        background-size: contain;
    }
    &.pending:before {
        background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="48" width="48"><path d="M8.35 40v-3h6.5l-.75-.6q-3.2-2.55-4.65-5.55-1.45-3-1.45-6.7 0-5.3 3.125-9.525Q14.25 10.4 19.35 8.8v3.1q-3.75 1.45-6.05 4.825T11 24.15q0 3.15 1.175 5.475 1.175 2.325 3.175 4.025l1.5 1.05v-6.2h3V40Zm20.35-.75V36.1q3.8-1.45 6.05-4.825T37 23.85q0-2.4-1.175-4.875T32.75 14.6l-1.45-1.3v6.2h-3V8h11.5v3h-6.55l.75.7q3 2.8 4.5 6t1.5 6.15q0 5.3-3.1 9.55-3.1 4.25-8.2 5.85Z"/></svg>');
        animation: spinner 1s linear infinite;
    }
}

.chat-talk-user + .chat-talk-user .chat-talk-inner:before, .chat-talk-agent + .chat-talk-agent .chat-talk-inner:before {
    display: none;
}
.chat-input-container {
    position: fixed;
    bottom: 0;
    left: $sideBarWidth;
    right: 0;
    // height: $navHeight + 1.25 * $defaultPadding;// calc(env(safe-area-inset-bottom)/3)
    height: calc(#{$navHeight} + #{1.25 * $defaultPadding} + #{env(safe-area-inset-bottom) / 3});
    background-color: $defaultPink;
    // .is-in-native-app & {
    //     height: calc(#{$navHeight} + #{1.25 * $defaultPadding});
    // }
}
.chat-input-inner {
    position: absolute;
    bottom: $defaultPadding * 0.25;
    left: 0;
    right: math.div($defaultPadding, 2);
    height: auto;
    max-width: $chatWidth;
    margin: auto;
}
.chat-input-first-line {
    padding-left: $navHeight;
}
.chat-disclaimer {
    font-size: 0.9em;
    color: $lightGrey;
    text-align: center;
    padding: $defaultPadding * 0.25 $defaultPadding * 0.25 calc(env(safe-area-inset-bottom) / 3) $defaultPadding * 0.25;
    // .is-in-native-app & {
    //     padding: $defaultPadding * 0.25 $defaultPadding * 0.25 0 $defaultPadding * 0.25;
    // }
}
.chat-input {
    display: flex;
    border: 1px solid $whiteBorderFT;
    border-radius: math.div($defaultPadding, 4);
    padding: math.div($defaultPadding, 3) $navHeight math.div($defaultPadding, 3) math.div($defaultPadding, 3);
    background-color: white;
    textarea {
        background-color: white;
        border-width: 0;
        width: 100%;
        font-size: 18px;
        line-height: 24px;
        resize: none; 
        overflow-y: hidden;
        height: auto; 
        max-height: 200px;
        &:focus {
            outline-color: transparent;
        }
    }
}
.chat-submit {
    position: absolute;
    right: 0;
    top: 0;
    width: $navHeight;
    height: $navHeight;
    background-position: 50% 50%;
    background-size: 24px 24px;
    background-repeat: no-repeat;
    background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iNDgiIHdpZHRoPSI0OCI+PHBhdGggZD0iTTYgNDBWOGwzOCAxNlptMy00LjY1TDM2LjIgMjQgOSAxMi41djguNEwyMS4xIDI0IDkgMjdabTAgMFYxMi41IDI3WiIvPjwvc3ZnPg==);
    .pending & {
        background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="48" viewBox="0 96 960 960" width="48"><path d="M207.858 624Q188 624 174 609.858q-14-14.141-14-34Q160 556 174.142 542q14.141-14 34-14Q228 528 242 542.142q14 14.141 14 34Q256 596 241.858 610q-14.141 14-34 14Zm272 0Q460 624 446 609.858q-14-14.141-14-34Q432 556 446.142 542q14.141-14 34-14Q500 528 514 542.142q14 14.141 14 34Q528 596 513.858 610q-14.141 14-34 14Zm272 0Q732 624 718 609.858q-14-14.141-14-34Q704 556 718.142 542q14.141-14 34-14Q772 528 786 542.142q14 14.141 14 34Q800 596 785.858 610q-14.141 14-34 14Z"/></svg>');
    }
}

.chat-start-over {
    position: absolute;
    left: 0;
    top: 0;
    width: $navHeight;
    height: $navHeight;
    background-position: 50% 50%;
    background-size: 24px 24px;
    background-repeat: no-repeat;
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="48" viewBox="0 -960 960 960" width="48"><path d="M420-520h120v-280q0-25-17.25-42.5T480-860q-25.5 0-42.75 17.25T420-800v280ZM180-340h600v-120H180v120Zm-64 240h134v-90q0-12.75 8.675-21.375 8.676-8.625 21.5-8.625 12.825 0 21.325 8.625T310-190v90h140v-90q0-12.75 8.675-21.375 8.676-8.625 21.5-8.625 12.825 0 21.325 8.625T510-190v90h140v-90q0-12.75 8.675-21.375 8.676-8.625 21.5-8.625 12.825 0 21.325 8.625T710-190v90h134l-50-200H166l-50 200Zm702 60H142q-39 0-63-31t-14-69l55-220v-80q0-33 23.5-56.5T200-520h160v-280q0-50 35-85t85-35q50 0 85 35t35 85v280h160q33 0 56.5 23.5T840-440v80l55 220q10 38-14 69t-63 31Zm-38-420H180h600Zm-240-60H420h120Z"/></svg>');
    &[data-purpose] {
        background-color: transparent;
        padding: 0;
        margin-top: 0;
        font-size: 1em;
    }
}


.chat-item-container {
    margin-bottom: 1em;
    height: 100%;
    display: flex;
    flex-direction: column;
    &.no-image {
        padding: $defaultPadding * 0.5;
        background-color: $bannerBG;
        @media only screen and (max-width: 490px) {
            margin-left: -$defaultPadding * 0.5;
            margin-right: -$defaultPadding * 0.5;
        }
    }
    .chat-item-topper {
        flex-grow: 1;
        flex-basis: auto;
    }
}



.chat-item-title {
    font-weight: bold;
    font-size: 1.2em;
    margin-bottom: 0.5em;
    a {
        cursor: pointer;
        color: black;
    }

}

.read {
    .chat-item-title {
        a {
            color: #66605c;
        }
    }
}

.chat-item-actions, .survey-ending-container {
    a {
        cursor: pointer;
        color: black;
        border: 1px solid $leadColor;
        padding: math.div($defaultPadding, 3) math.div($defaultPadding, 1);
        display: inline-block;
        margin: math.div($defaultPadding, 2) math.div($defaultPadding, 2) 0 0;
        font-size: 1em;
        transition: transform .5s;
        &.hide {
            display: none;
        }
        &:hover, &:active {
            transform: scale(1.1);
        }
    }
    &.right {
        text-align: right;
    }
}
.settings-container {
    .chat-item-actions {
        text-align: center;
        a {
            background-color: $darkGreen;
            color: white;
        }
    }
}
.code-block-title {
    padding: math.div($defaultPadding, 4);
    background-color: $sideBorderColor;
    color: white;
    position: relative;
    min-height: $navHeight;
}
.code-block-copy {
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="48" viewBox="0 96 960 960" width="48" fill="white"><path d="M180 975q-24 0-42-18t-18-42V312h60v603h474v60H180Zm120-120q-24 0-42-18t-18-42V235q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H300Zm0-60h440V235H300v560Zm0 0V235v560Z"/></svg>');
    float: right;
    width: 24px;
    height: 24px;
    position: absolute;
    right: math.div($defaultPadding, 4);
    top: 0;
    bottom: 0;
    margin: auto;
    background-position: 50%;
    background-size: cover;
    cursor: pointer;
}
.code-block {
    padding: math.div($defaultPadding, 2);
    background-color: $bannerBG;
    overflow-x: scroll;
    white-space: nowrap;
    pre {
        font-family: 'Courier New', Courier, monospace;
    }
}
.chat-item-summary {
    font-weight: bold;
    font-size: 1.2em;
    margin-top: math.div($defaultPadding, 2);
}
.item-lead {
    color: $darkGrey;
    line-height: $goldenRatio;
}
.primary-theme {
    color: $red;
    font-weight: bold;
    position: relative;
    display: inline-block;
    position: relative;
    margin-bottom: 20px;
    &:before {
        content: "";
        display: block;
        position: absolute;
        bottom: -12px;
        width: 100%;
        height: 5px;
        background: $red;
    }
}
.chat-item-container .story-time {
    color: $lightGrey;
}
.article-container .story-time {
    padding-right: 1em;
}
.chat-item-group-title {
    //MARK： - follow the style here: https://ig.ft.com/russias-war-in-ukraine/
    position: relative;
    border: 1px solid $lightGrey;
    padding: math.div($defaultPadding, 2);
    margin: math.div($defaultPadding, 1) 0;
    color: black;
    font-weight: bold;
    text-align: center;
    font-size: 1.4em;
    &::before {
        content: '';
        position: absolute;
        display: block;
        margin: auto;
        width: $navHeight;
        height: $navHeight;
        right: 0;
        top: 0;
        bottom: 0;
        background-image: url("https://www.ft.com/__origami/service/image/v2/images/raw/fticon-v1:plus?source=origami-build-service&format=svg&tint=%2366605C");
        background-repeat: no-repeat;
        background-size: $navHeight;
        background-position: right center;
        transition: transform .5s;
    }
    &:hover, &:active, .expanded & {
        background-color: $red;
        border-color: $red;
        color: white;
        cursor: pointer;
        &::before {
            background-image: url("https://www.ft.com/__origami/service/image/v2/images/raw/fticon-v1:plus?source=origami-build-service&format=svg&tint=%23ffffff");
        }
    }
    .expanded & {
        &::before {
            transform: rotate(45deg);
        }
    }
}

.chat-item-group-items {
    display: none;
}
.chat-item-group-container.expanded {
    .chat-item-group-items {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax($gridCellWidth, 1fr));
        column-gap: $defaultPadding;
        grid-column-gap: $defaultPadding;
        row-gap: $defaultPadding;
        grid-row-gap: $defaultPadding;
        margin-bottom: $defaultPadding;
        &.has-odd-items > :first-child {
            grid-column: 1 / -1;
        }
    }
}
.chat-citations {
    a {
        font-size: 0.8em;
    }
}

.current-chat-roles {
    margin-top: $defaultPadding * 0.5;
}
[data-purpose] {
    // display: none;
    background-color: $bannerBG;
    padding: math.div($defaultPadding, 3);
    margin-top: math.div($defaultPadding, 2);
    font-size: 0.7em;
    .sidebar & {
        background-color: transparent;
        color: white;
        display: block;
        font-size: 1.2em;
        // font-weight: bold;
        margin: 0;
        cursor: pointer;
    }
}

.sidebar {
    .side-bottom {
        [data-purpose] {
            display: inline-block;
        }
    }
}

.sidebar {
    .sign-in-container, .logged-in-container {
        a {
            color: white;
            display: inline-block;
            font-size: 1.2em;
            padding: math.div($defaultPadding, 3);
        }
    }
}


.logged-in-container, .sign-in-container {
    display: none;
}

.quiz-question, .survey-question {
    font-weight: bold;
    font-size: 1.2em;
    margin-bottom: math.div($defaultPadding, 2);
}

.quiz-options, .survey-options {
    div {
        background-color: rgb(230, 217, 206);
        border-color: rgb(230, 217, 206);
        border-width: 2px;
        border-style: solid;
        margin-bottom: math.div($defaultPadding, 2);
        // font-weight: bold;
        font-size: 1.2em;
        padding: math.div($defaultPadding, 2);
        cursor: pointer;
    }
}
.survey-options {
    div.text-input {
        border-width: 1px;
        padding: 0;
        input {
            width: 100%;
            font-size: 1em;
            line-height: 1.4em;
            padding: math.div($defaultPadding, 2);
            border-width: 0;
        }
    }
}

.quiz-explanation {
    display: none;
    .is-done & {
        display: block;
    }
}

.quiz-container, .survey-item-container {
    border-top: 1px solid $borderColor;
    padding-top: 1.4em;
    margin-bottom: 1.4em;
    &:first-child, &.is-first-item {
        border-color: transparent;
        padding-top: 0;
    }
    .is-selected {
        border-color: rgb(33, 114, 171);
    }
    &.is-done {
        .is-correct {
            border-color: rgb(120, 189, 107);
        }
    }
    &.is-wrong {
        .is-selected {
            border-color: #CC0000;
        }
    }
}

.quiz-next, .survey-submit {
    margin: auto;
    font-size: 1.2em;
    padding: math.div($defaultPadding, 4) math.div($defaultPadding, 2);
    width: auto;
    height: auto;
}

body {
    .sign-in-container {
        display: block;
    }
    &.logged-in {
        .sign-in-container {
            display: none;
        }
        .logged-in-container {
            display: block;
        }
    }
}

.full-grid-story {
    [data-action="show-transcript"], ft-related, promo-box, .story-header-container, .chat-item-actions, .article-prompt, .audio-placeholder, #story-body-container > * {
        max-width: $chatWidth;
        margin-left: auto;
        margin-right: auto;
        display: block;
    }
    #story-body-container {
        .n-content-pullquote, .n-content-big-number, [data-layout-width="inset-left"] {
            max-width: 360px;
            margin-left: calc((100% - 768px) / 2);
            margin-right: 30px;
        }
    }
    .is-bilingual {
        #story-body-container {
            .n-content-pullquote, .n-content-big-number, [data-layout-width="inset-left"] {
                margin-left: 0;
                margin-right: 0;
            }
        }
    }
    .article-prompt {
        margin-top: 2em;
        font-weight: bold;
    }
}




.full-grid-story {
    .chat-talk-inner {
        max-width: 100%;
        padding: 0;
    }
    #story-body-container {
        .scrollable-block {
            max-width: 100%;
            margin: 0 auto 1em auto;
        }
        [data-layout-width="full-grid"] {
            max-width: 1200px;
            margin: 0 auto 1em auto;
        }
    }
}
.chat-full-grid {
    .chat-talk-inner {
        max-width: $chatWidth + $defaultPadding;
        padding: 0 $defaultPadding * 0.5;
    }
}
.story-image {
    figure {
        img {
            max-width: 100%;
            width: 100%;
        }
    }
}

.discuss-article-only, .survey-only {
    .chat-item-actions, .full-grid-story {
        display: none;
    }
}
.intention-fixed {
    .chat-item-actions {
        display: none;
    } 
}

.select-container {
    margin-top: math.div($defaultPadding, 2);
    display: flex;
    select {
        min-width: 200px;
        border: none;
        background-color: white;
        font-size: 0.9em;
        color: $darkGrey;
        padding: 5px;
    }
}
.select-label {
    flex: 1;
}
.annotations-container {
    margin-top: math.div($defaultPadding, 2);
}
.add-interests-container {
    position: fixed;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    background-color: $defaultPink;
    z-index: 2;
}

.overlay-content, .annotations-container {
    div.input-container {
        display: flex;
        padding-bottom: $defaultPadding * 0.5;
        position: relative;
    }
    div.input-name, div.input-name-container {
        flex: 1;
        padding: 0;
        // font-weight: bold;
        input {
            padding: $defaultPadding * 0.25;
        }
    }
}

.custom-topic-suggestion {
    display: none;
    position: absolute;
    left: $defaultPadding * 0.5;
    right: $defaultPadding * 0.5;
    top: $defaultPadding * 1.5;
    background-color: white;
    border: 1px solid $borderColor;
    z-index: 1;
    &.on {
        display: block;
    }
}

.overlay-content {
    max-height: 600px;
    width: 490px;
    overflow-y: scroll;
    div.input-title {
        font-weight: bold;
        font-size: 1.2em;
    }
    @media only screen and (max-width: 490px) {
        width: 300px;
    }
}

.overlay-title {
    position: sticky;
    top: 0;
    z-index: 1;
}

.show-article-later-container {
    float: right;
    position: relative;
}
.show-article-later{
    background-color: transparent;
}
.show-article-later-flag{
    font-size: 0.8em;
    position: absolute;
    top:0;
    right:0;
    opacity: 0;
    display: none;
    white-space: nowrap; /* 防止文本换行，自适应大小在一行内显示 */
    background-color:$bannerBG;
    padding: 10px; 
    &.on {
        display: block;
        animation: fadeInOut 4s linear;
    }
}
.jump-to-article{
    position: absolute;
    top:0;
    right:0;
    display: none;
    white-space: nowrap; /* 防止文本换行，自适应大小在一行内显示 */
    background-color: transparent;
}

.article-language-switch-container {
    // box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
    margin: 0 auto $defaultPadding*0.5 auto;
    text-align: center;
    width: 100%;
    // min-width: 336px;
    // max-width: 450px;
    height: $headerHeight - 5px;
    line-height: $headerHeight;
    background-color: $defaultPink;
    position: -webkit-sticky;
    position: -moz-sticky;
    position: -o-sticky;
    position: -ms-sticky;
    position: sticky;
    top: 0;
    z-index: 1;
    button {

        &.on {
            background-color: $darkGreen;
            color: white;
        }
    }
    @media only screen and (max-width: 490px) {
        height: $navHeight;
        line-height: $navHeight;
        margin-bottom: 5px;
    }
    
}
.ai-disclaimer {
    // background-color: #f8e9a1; 
    // border: 1px solid #f5d56e;
    margin: 0 auto $defaultPadding * 0.5 auto;
    font-size: 0.9em;
    color: $lightGrey;
    max-width: $chatWidth;
    // font-weight: bold;
}
.machine-translation {
    cursor: pointer;
}

[draggable="true"] {
    cursor: move;
}

.drag-over-effect {
    transform: scale(1.02);
    transform-origin: center;
    transition: transform 0.3s ease;
}

@keyframes fadeInOut {
    0% {
        opacity: 0;
    }
    25% {
        opacity: 1;
    }
    100% {
        opacity: 0;
    }
}

@keyframes spinner {
    0% {
      transform: rotate(0deg);
    }
    100% {
      transform: rotate(360deg);
    }
}

@media only screen and (max-width: 980px) {
    .full-grid-story {
        #story-body-container {
            .n-content-pullquote, .n-content-big-number {
                margin: auto;
                padding: 0;
                float: none;
                max-width: $chatWidth;
            }
        }
        .story-headline, .story-lead, .story-byline, #story-body-container .n-content-pullquote, #story-body-container .n-content-big-number, #story-body-container > *, .article-prompt, .chat-item-actions, [data-action="show-transcript"], .ai-disclaimer {
            padding-left: math.div($defaultPadding, 2);
            padding-right: math.div($defaultPadding, 2);
        }
        .quiz-next {
            margin-left: math.div($defaultPadding, 2);
        }
        .story-image {
            margin-left: 0;
            margin-right: 0;
        }
    }
}

// @media only screen and (max-width: 768px) {
@media only screen and (max-width: 1028px) {
    .chat-talk-inner {
        padding: 5px math.div($defaultPadding, 2) 5px $navHeight + math.div($defaultPadding,2);
        &:before {
            left: math.div($defaultPadding, 2);
        }
    }
}

@media only screen and (max-width: 768px) {
    .audio-placeholder {
        &.is-sticky-top {
            position: sticky;
            top: $navHeight;
            z-index: 1;
            bottom: auto;
            margin-bottom: math.div($defaultPadding, 2);
            margin-top: math.div($defaultPadding, 2);
        }
    }
    .masthead {
       background-image: url("https://thumbor.ftacademy.cn/unsafe/picture/9/000132359_piclink.png")
    }
    body {
        &.font-smallest {
            font-size: 12px;
        }
        &.font-smaller {
            font-size: 16px;
        }
        &.font-larger {
            font-size: 22px;
        }
        &.font-largest {
            font-size: 26px;
        }
    }

    .full-grid-story {
        #story-body-container {
            .n-content-pullquote, .n-content-big-number, [data-layout-width="inset-left"] {
                max-width: 100%;
                margin-left: 0;
                margin-right: 0;
            }
        }
    }


    .sidebar {
        transform: translateX(-100%);
        transition: transform 0.5s ease-in-out, opacity 0.5s ease-in-out, visibility 0s linear 0.5s;
        opacity: 0;
        visibility: hidden;
        z-index: 2;
    
        &.on {
            width: 100%;
            transform: translateX(0%);
            opacity: 1;
            visibility: visible;
            transition-delay: 0s; // Reset delay for showing
            .sidebar-bg {
                position: fixed;
                left: $sideBarWidth;
                right: 0;
                height: 100%;
                top: 0;
                bottom: 0;
                opacity: 0.618;
                background-color: black;
            }
        }
    }


    .sidebar-close-button {
        display: inline-block;
        width: 30px;       /* Size of the button */
        height: 30px;
        background-color: white;
        border: 1px solid #ccc; /* Border to make it more visible */
        border-radius: 15px;    /* Rounded corners */
        cursor: pointer;        /* Cursor changes to pointer on hover */
        position: absolute;     /* Position relative to place the 'X' correctly */
        outline: none;          /* Removes the default focus outline */
        top: 10px;
        right: 10px;
    }
    
    .sidebar-close-button:after {
        content: 'X';
        font-family: Arial, sans-serif; /* Arial is a common choice for a clean 'X' */
        font-size: 20px;       /* Size of the 'X' */
        color: black;          /* Color of the 'X' */
        position: absolute;    /* Absolute position inside the button */
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%); /* Center the 'X' inside the button */
    }

    
    .main-content {
        margin-left: auto;
    }
    .header-container {
        display: block;
    }
    .chat-talk {
        margin-bottom: 1em;
        &:first-child {
            margin-top: $navHeight + $defaultPadding;
        }
    }
    .chat-input-container {
        left: 0;
    }
}