<%if date("Ymd",$smarty.now) <= 20171231%>
    try {
        var stateObj = {foo: 'bar'};
        var newUrl = window.location.href + '&refresh=1';
        history.pushState(stateObj, '', newUrl);
    } catch (ignore) {

    }

    <%if date("Ymd",$smarty.now) == 20171117 && date("Ymd",$smarty.now) == 20171124%>
        window.refreshTime = 20;
    <%else%>
        window.refreshTime = 10;
    <%/if%>

    if (/1000[0-9]{4}0201|1000[0-9]{4}0411|1000[0-9]{4}0412|1000[0-9]{4}0421|1000[0-9]{4}0301/.test(c)) {
    setTimeout(function(){
        if ( window.parent.document.getElementById(parentId)) {
            parentIframe = window.parent.document.getElementById(parentId);
            var divAddedByClient = parentIframe.parentNode.querySelectorAll('div')[0];
            if (divAddedByClient !== undefined) {
                divAddedByClient.outerHTML = '';
                delete divAddedByClient;
            }
            parentIframe.style = '';
            parentIframe.setAttribute('width', '100%');
        }
        location.reload(false);
    }, 1000 * 60 * window.refreshTime);
    }

<%/if%>