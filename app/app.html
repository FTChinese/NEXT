<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, shrink-to-fit=no, viewport-fit=cover">
<meta name="apple-mobile-web-app-status-bar-style" content="default">


<!-- <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, shrink-to-fit=no, viewport-fit=contain"> -->
<!-- <meta name="apple-mobile-web-app-status-bar-style" content="default"> -->

<meta name="apple-touch-fullscreen" content="YES">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="mobile-web-app-capable" content="yes">
<meta name="theme-color" content="#FFF1E0" />
<link rel="apple-touch-icon" sizes="180x180" href="https://d2785ji6wtdqx8.cloudfront.net/img/friend-share-icon.jpg">
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<title>FT中文网</title>
<meta http-equiv="Content-Language" content="en"/>
<meta content="Chat with the FT" name="description"/>


<!-- build:css styles/main-app.css -->
<link rel="stylesheet" href="styles/main-app.css">
<!-- endbuild -->

<link rel="stylesheet" href="styles/main-chat-quiz.css">


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-2MCQJHGE8J"></script>
<script>
// Define UTM and custom parameter mappings
const paramMapping = {
    'utm_source': 'campaign_source',
    'utm_medium': 'campaign_medium',
    'utm_campaign': 'campaign_name',
    'utm_term': 'campaign_term',
    'utm_content': 'campaign_content',
    'ccode': 'campaign_name'  // Custom tracking parameter
};

// Extracts campaign parameters based on paramMapping
function getTagParameters() {
    try {
        const url = new URL(window.location.href);
        const params = new URLSearchParams(url.search || url.hash.substring(1));
        const campaignParams = {};

        // Map URL params to GA4-compatible keys
        Object.entries(paramMapping).forEach(([utmKey, campaignKey]) => {
            if (params.has(utmKey)) {
                campaignParams[campaignKey] = params.get(utmKey);
            }
        });

        return campaignParams;
    } catch (error) {
        console.error("Error parsing URL parameters:", error);
        return {};
    }
}

// Cleans page_location by removing tracking parameters
function getCleanPageLocation() {
    try {
        const url = new URL(window.location.href);

        // Only keep parameters not in paramMapping
        [...url.searchParams.keys()].forEach(param => {
            if (paramMapping[param]) {
                url.searchParams.delete(param);
            }
        });

        return url.origin + url.pathname + url.search;
    } catch (error) {
        console.error("Error generating clean page location:", error);
        return window.location.origin + window.location.pathname;
    }
}

window.dataLayer = window.dataLayer || [];
function gtag() { dataLayer.push(arguments); }

// Initialize GA4 with send_page_view: false to prevent duplicate page views
gtag('js', new Date());

// Get campaign parameters and cleaned page location
const gTagParameters = getTagParameters();
gtag('config', 'G-2MCQJHGE8J', { send_page_view: false });

// Trigger page_view event with campaign parameters and cleaned page location
const page_location = getCleanPageLocation();
gtag('event', 'page_view', {
    ...gTagParameters,
    page_location
});
</script>


<link rel="icon" type="image/svg+xml" href="https://www.ft.com/__origami/service/image/v2/images/raw/ftlogo-v1%3Abrand-ft-logo-square-coloured?source=update-logos&amp;format=svg"/>
<link rel="alternate icon" type="image/png" href="https://www.ft.com/__origami/service/image/v2/images/raw/ftlogo-v1%3Abrand-ft-logo-square-coloured?source=update-logos&amp;format=png&amp;width=32&amp;height=32" sizes="32x32"/>
<link rel="alternate icon" type="image/png" href="https://www.ft.com/__origami/service/image/v2/images/raw/ftlogo-v1%3Abrand-ft-logo-square-coloured?source=update-logos&amp;format=png&amp;width=194&amp;height=194" sizes="194x194"/>
</head>

<body>

<div class="app-root-view">
  <header class="app-header-container">
    <div class="app-header-inner">
      <div class="app-header-masthead"></div>
      <a class="app-header-side header-left header-icon-ai" href="/powertranslate/chat.html"></a>
      <a class="app-header-side header-right header-icon-search" data-action="search"></a>
    </div>
    <div class="app-nav" id="app-nav"></div>
  </header>
  <div class="app-main-content" id="app-main-content">

  </div>
  <div class="app-bottom" id="app-bottom"></div>
</div>


</body>


<script>
    window.isFrontEndTest = true;
</script>
<!-- build:js scripts/main-app.js -->
<script type="text/javascript" src="scripts/dom-delegate.js"></script>
<script type="text/javascript" src="scripts/indexed-db.js"></script>
<script type="text/javascript" src="scripts/key.js"></script>
<script type="text/javascript" src="scripts/ai.js"></script>
<script type="text/javascript" src="scripts/trie.js"></script>
<script type="text/javascript" src="scripts/convert-chinese.js"></script>
<script type="text/javascript" src="scripts/get-my-preference.js"></script>
<script type="text/javascript" src="scripts/chat-my-ft.js"></script>
<script type="text/javascript" src="scripts/chat-dict.js"></script>
<script type="text/javascript" src="scripts/track-click.js"></script>
<script type="text/javascript" src="scripts/swipe.js"></script>
<script type="text/javascript" src="scripts/main.js"></script>
<script type="text/javascript" src="scripts/headshots.js"></script>
<script type="text/javascript" src="scripts/app-audio.js"></script>
<script type="text/javascript" src="scripts/app-content.js"></script>
<script type="text/javascript" src="scripts/app-nav.js"></script>
<!-- endbuild -->


</html>